# Reactions Backend

–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π Backend API –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É –≤—ñ–¥–≥—É–∫—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å—É—á–∞—Å–Ω–∏—Ö API —Å–µ—Ä–≤—ñ—Å—ñ–≤.

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

- üöÄ **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥** - –æ–¥–∏–Ω API –¥–ª—è –≤—Å—ñ—Ö –¥–∂–µ—Ä–µ–ª
- üó∫Ô∏è **Google Maps** - –≤—ñ–¥–≥—É–∫–∏ —á–µ—Ä–µ–∑ serper.dev (–æ—Å–Ω–æ–≤–Ω–∏–π) + SerpAPI (fallback)
- üì± **Google Play Store** - –≤—ñ–¥–≥—É–∫–∏ —á–µ—Ä–µ–∑ serper.dev + SerpAPI
- üçé **App Store** - –≤—ñ–¥–≥—É–∫–∏ —á–µ—Ä–µ–∑ serper.dev + SerpAPI
- üîç **Google Search** - –ø–æ—à—É–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ —á–µ—Ä–µ–∑ serper.dev
- üíæ **SQLite –±–∞–∑–∞ –¥–∞–Ω–∏—Ö** - –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- üåê **CORS –ø—ñ–¥—Ç—Ä–∏–º–∫–∞** - –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
- ‚ö° **–®–≤–∏–¥–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ API –≤–∏–∫–ª–∏–∫–∏
- üîÑ **Fallback —Å–∏—Å—Ç–µ–º–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ API

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
npm install
```

2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ API –∫–ª—é—á—ñ:
```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª .env –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó back/
echo "SERPER_API_KEY=8cf14c1ad23cb13b1e5798e9750ac7734c991eb7" > .env
echo "SERPAPI_API_KEY=8cf14c1ad23cb13b1e5798e9750ac7734c991eb7" >> .env

# –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—ñ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É
echo "MAX_REVIEW_PAGES=20" >> .env  # –ú–∞–∫—Å–∏–º—É–º 20 —Å—Ç–æ—Ä—ñ–Ω–æ–∫
echo "REVIEWS_PER_PAGE=8" >> .env   # 8 –≤—ñ–¥–≥—É–∫—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
```

3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫:
```bash
npm run start:dev
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API

### üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
API –∫–ª—é—á—ñ –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ! –°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:
- **serper.dev** —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π API (—à–≤–∏–¥—à–∏–π, –¥–µ—à–µ–≤—à–∏–π)
- **SerpAPI** —è–∫ fallback (–¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤)

### üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–ª—é—á—ñ–≤
```bash
# serper.dev (–æ—Å–Ω–æ–≤–Ω–∏–π API)
SERPER_API_KEY=8cf14c1ad23cb13b1e5798e9750ac7734c991eb7

# SerpAPI (fallback)
SERPAPI_API_KEY=8cf14c1ad23cb13b1e5798e9750ac7734c991eb7
```

### üí° –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
- **–®–≤–∏–¥—à–µ** - serper.dev –ø—Ä–∞—Ü—é—î —à–≤–∏–¥—à–µ –∑–∞ SerpAPI
- **–ù–∞–¥—ñ–π–Ω—ñ—à–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π fallback –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
- **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—à–µ** - –æ–¥–∏–Ω API –¥–ª—è –≤—Å—ñ—Ö –¥–∂–µ—Ä–µ–ª

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä—Å–∏–Ω–≥—É

### –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—ñ–≤
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏—Ç—å –¥–æ **1600 –≤—ñ–¥–≥—É–∫—ñ–≤** (200 —Å—Ç–æ—Ä—ñ–Ω–æ–∫ √ó 8 –≤—ñ–¥–≥—É–∫—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è Google Maps).

#### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
- `MAX_REVIEW_PAGES` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 200)
- `REVIEWS_PER_PAGE` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 8)
- `UNLIMITED_PAGES` - –∑–Ω—è—Ç–∏ –≤—Å—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: false)

#### –ü—Ä–∏–∫–ª–∞–¥–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å:
```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (1600 –≤—ñ–¥–≥—É–∫—ñ–≤)
MAX_REVIEW_PAGES=200
REVIEWS_PER_PAGE=8

# –ë—ñ–ª—å—à–µ –≤—ñ–¥–≥—É–∫—ñ–≤ (3200 –≤—ñ–¥–≥—É–∫—ñ–≤)
MAX_REVIEW_PAGES=400
REVIEWS_PER_PAGE=8

# –ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å (–ø–∞—Ä—Å–∏–Ω–≥ –≤—Å—ñ—Ö –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –≤—ñ–¥–≥—É–∫—ñ–≤)
UNLIMITED_PAGES=true

# –®–≤–∏–¥—à–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (80 –≤—ñ–¥–≥—É–∫—ñ–≤)
MAX_REVIEW_PAGES=10
REVIEWS_PER_PAGE=8
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ó–±—ñ–ª—å—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤—ñ–¥–≥—É–∫—ñ–≤ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ:
- –ë—ñ–ª—å—à–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è API –∫–≤–æ—Ç SerpAPI
- –î–æ–≤—à–æ–≥–æ —á–∞—Å—É –ø–∞—Ä—Å–∏–Ω–≥—É
- –ë—ñ–ª—å—à–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –±–∞–∑—É –¥–∞–Ω–∏—Ö

## API Endpoints

### üöÄ –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- `POST /universal-parsing/parse` - –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –≤—Å—ñ—Ö –¥–∂–µ—Ä–µ–ª
- `GET /universal-parsing/sources` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª
- `POST /universal-parsing/google-maps` - Google Maps —á–µ—Ä–µ–∑ serper.dev
- `POST /universal-parsing/google-play` - Google Play Store —á–µ—Ä–µ–∑ serper.dev
- `POST /universal-parsing/app-store` - App Store —á–µ—Ä–µ–∑ serper.dev
- `POST /universal-parsing/google-search` - Google Search —á–µ—Ä–µ–∑ serper.dev

### üîß Serper.dev API
- `POST /serper/parse-universal` - –ü—Ä—è–º–∏–π –≤–∏–∫–ª–∏–∫ serper.dev
- `GET /serper/test-connection` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### üì± –ö–ª–∞—Å–∏—á–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (legacy)
- `POST /parsing/parse` - –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ SerpAPI
- `POST /google-maps/parse` - Google Maps —á–µ—Ä–µ–∑ SerpAPI

### üíæ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ
- `GET /comments` - –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
- `GET /comments?store=playstore` - –§—ñ–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `GET /comments/app/:appId` - –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É/–º—ñ—Å—Ü—è
- `GET /comments/:id` - –û–∫—Ä–µ–º–∏–π –∫–æ–º–µ–Ω—Ç–∞—Ä
- `DELETE /comments/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```bash
# üöÄ –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
curl -X GET http://localhost:3000/serper/test-connection

# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª
curl -X GET http://localhost:3000/universal-parsing/sources

# Google Maps
curl -X POST http://localhost:3000/universal-parsing/google-maps \
  -H "Content-Type: application/json" \
  -d '{"placeId": "ChIJN1t_tDeuEmsRUsoyG83frY4", "language": "uk"}'

# Google Play Store
curl -X POST http://localhost:3000/universal-parsing/google-play \
  -H "Content-Type: application/json" \
  -d '{"appId": "com.whatsapp", "language": "uk"}'

# App Store
curl -X POST http://localhost:3000/universal-parsing/app-store \
  -H "Content-Type: application/json" \
  -d '{"appId": "310633997", "language": "uk"}'

# Google Search
curl -X POST http://localhost:3000/universal-parsing/google-search \
  -H "Content-Type: application/json" \
  -d '{"query": "WhatsApp reviews", "language": "uk"}'

# üì± –ö–ª–∞—Å–∏—á–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (legacy)
curl -X POST http://localhost:3000/parsing/parse \
  -H "Content-Type: application/json" \
  -d '{"url": "https://play.google.com/store/apps/details?id=com.whatsapp"}'
```

## –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏

‚úÖ **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—Å—Ç—å** - –æ–¥–∏–Ω API –¥–ª—è –≤—Å—ñ—Ö –¥–∂–µ—Ä–µ–ª  
‚úÖ **–®–≤–∏–¥–∫—ñ—Å—Ç—å** - serper.dev –ø—Ä–∞—Ü—é—î —à–≤–∏–¥—à–µ –∑–∞ SerpAPI  
‚úÖ **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π fallback –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - —î–¥–∏–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å—ñ—Ö –¥–∂–µ—Ä–µ–ª  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ API –≤–∏–∫–ª–∏–∫–∏  
‚úÖ **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ API  

## –ú–æ–¥—É–ª—ñ

- **UniversalParsingModule** - –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –≤—Å—ñ—Ö –¥–∂–µ—Ä–µ–ª
- **SerperModule** - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ serper.dev API
- **SerpApiModule** - Fallback —á–µ—Ä–µ–∑ SerpAPI
- **CommentsModule** - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
- **ParsingModule** - –ö–ª–∞—Å–∏—á–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (legacy)
- **GoogleMapsModule** - –ö–ª–∞—Å–∏—á–Ω–∏–π Google Maps (legacy)

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π —Ç–µ—Å—Ç
node test-demo.js

# –û—á–∏—â–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
node clear-database.js
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **NestJS** - Node.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π JavaScript
- **SQLite** - –ª–µ–≥–∫–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **serper.dev** - –æ—Å–Ω–æ–≤–Ω–∏–π API –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É
- **SerpAPI** - fallback API
- **Axios** - HTTP –∫–ª—ñ—î–Ω—Ç
- **TypeORM** - ORM –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î

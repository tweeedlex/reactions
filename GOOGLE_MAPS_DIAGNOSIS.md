# üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Google Maps –ü—Ä–æ–±–ª–µ–º–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
```
–ü—Ä–∏ –≤–≤–æ–¥—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ Google Maps - –±–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–π —Ü–∏–∫–ª —Ç–∞ 0 –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
```

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î:
- **Backend –∑–∞–ø—É—â–µ–Ω–∏–π** - –ø—Ä–æ—Ü–µ—Å –ø—Ä–∞—Ü—é—î
- **SerpAPI –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** - `{"success":true,"connected":true}`
- **API endpoints** - –¥–æ—Å—Ç—É–ø–Ω—ñ
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö** - –ø—Ä–∞—Ü—é—î (—î playstore –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ)

### ‚ùå –©–æ –Ω–µ –ø—Ä–∞—Ü—é—î:
- **Google Maps –ø–∞—Ä—Å–∏–Ω–≥** - –∑–∞–≤–∏—Å–∞—î –Ω–∞ –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —á–∞—Å
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–≥—É–∫—ñ–≤** - 0 Google Maps –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –≤ –ë–î
- **–¢–∞–π–º–∞—É—Ç–∏** - –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞–ª–µ–∂–Ω–∏–º —á–∏–Ω–æ–º

## üîç –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏

### 1. **SerpAPI –ø—Ä–æ–±–ª–µ–º–∏:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π API –∫–ª—é—á
- –û–±–º–µ–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç Place ID

### 2. **–ë–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–π –ø–æ—à—É–∫:**
- `findPlaceIdBySearch()` –∑–∞–≤–∏—Å–∞—î
- `searchPlaceByExtendedTerms()` –Ω–µ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è
- SerpAPI –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

### 3. **–¢–∞–π–º–∞—É—Ç–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å:**
- Promise.race –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –±–ª–æ–∫—É—î—Ç—å—Å—è
- SerpAPI –∑–∞–ø–∏—Ç–∏ –Ω–µ –º–∞—é—Ç—å —Ç–∞–π–º–∞—É—Ç—ñ–≤

## üõ†Ô∏è –°–ø—Ä–æ–±–æ–≤–∞–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. **–î–æ–¥–∞–Ω–æ —Ç–∞–π–º–∞—É—Ç–∏:**
```typescript
// –ó–∞–≥–∞–ª—å–Ω–∏–π —Ç–∞–π–º–∞—É—Ç: 15 —Å–µ–∫—É–Ω–¥
const timeoutPromise = new Promise<number>((_, reject) => 
  setTimeout(() => reject(new Error('–¢–∞–π–º–∞—É—Ç –ø–∞—Ä—Å–∏–Ω–≥—É Google Maps (15 —Å–µ–∫—É–Ω–¥)')), 15000)
);

// –¢–∞–π–º–∞—É—Ç –ø–æ—à—É–∫—É: 3 —Å–µ–∫—É–Ω–¥–∏
const timeoutPromise = new Promise<string | null>((_, reject) => 
  setTimeout(() => reject(new Error('–¢–∞–π–º–∞—É—Ç –ø–æ—à—É–∫—É')), 3000)
);
```

### 2. **–û–±–º–µ–∂–µ–Ω–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±:**
```typescript
// –û–±–º–µ–∂—É—î–º–æ –¥–æ 7 —Å–ø—Ä–æ–± (–ø–µ—Ä—à—ñ 7 —Ç–µ—Ä–º—ñ–Ω—ñ–≤)
const limitedTerms = searchTerms.slice(0, 7);
```

### 3. **–î–æ–¥–∞–Ω–æ —à–≤–∏–¥–∫–∏–π return:**
```typescript
if (!foundPlaceId) {
  this.logger.warn('üö´ –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è —Ü—å–æ–≥–æ URL');
  return 0;
}
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. **–ü—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç –∑ —Ç–∞–π–º–∞—É—Ç–æ–º:**
```bash
timeout 10s curl -X POST "http://localhost:3000/google-maps/parse" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://maps.app.goo.gl/ABC123"}'
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–≤–∏—Å–∞—î, –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

### 2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ SerpAPI:**
```bash
curl "http://localhost:3000/google-maps/test-serpapi"
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ `{"success":true,"connected":true}`

### 3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤:**
```bash
curl "http://localhost:3000/comments" | grep -o '"store":"googlemaps"' | wc -l
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå `0` (–Ω–µ–º–∞—î Google Maps –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤)

## üö® –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. **SerpAPI –∑–∞–ø–∏—Ç–∏ –∑–∞–≤–∏—Å–∞—é—Ç—å:**
- `this.serpApiService.searchPlaceByName(term)` –Ω–µ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è
- –ù–µ–º–∞—î —Ç–∞–π–º–∞—É—Ç—ñ–≤ –Ω–∞ —Ä—ñ–≤–Ω—ñ SerpAPI —Å–µ—Ä–≤—ñ—Å—É
- Promise.race –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î

### 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:**
- Try-catch –Ω–µ –ª–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∞–Ω–Ω—è
- –¢–∞–π–º–∞—É—Ç–∏ –Ω–µ –ø–µ—Ä–µ—Ä–∏–≤–∞—é—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- –õ–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—É—é—Ç—å, –¥–µ —Å–∞–º–µ –∑–∞–≤–∏—Å–∞—î

### 3. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å fallback:**
- –ù–µ–º–∞—î –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±—É –ø–∞—Ä—Å–∏–Ω–≥—É
- –ù–µ–º–∞—î –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- –ù–µ–º–∞—î –æ–±–º–µ–∂–µ–Ω—å –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### 1. **–î–æ–¥–∞—Ç–∏ –∞–≥—Ä–µ—Å–∏–≤–Ω—ñ —Ç–∞–π–º–∞—É—Ç–∏:**
```typescript
// –¢–∞–π–º–∞—É—Ç –Ω–∞ —Ä—ñ–≤–Ω—ñ HTTP –∑–∞–ø–∏—Ç—ñ–≤
const controller = new AbortController();
const timeoutId = setTimeout(() => controller.abort(), 5000);

fetch(url, { signal: controller.signal })
  .then(response => {
    clearTimeout(timeoutId);
    return response;
  });
```

### 2. **–î–æ–¥–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤:**
```typescript
// –ú–∞–∫—Å–∏–º—É–º 3 –∑–∞–ø–∏—Ç–∏ –¥–æ SerpAPI
const maxRequests = 3;
let requestCount = 0;

if (requestCount >= maxRequests) {
  return null;
}
```

### 3. **–î–æ–¥–∞—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è:**
```typescript
// –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ—à—É–∫—É
const cache = new Map();
if (cache.has(term)) {
  return cache.get(term);
}
```

### 4. **–î–æ–¥–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è:**
```typescript
this.logger.log(`üîç –ü–æ—á–∞—Ç–æ–∫ –ø–æ—à—É–∫—É: ${term}`);
this.logger.log(`‚è±Ô∏è –¢–∞–π–º–∞—É—Ç –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: 3000ms`);
this.logger.log(`üìä –ó–∞–ø–∏—Ç #${i + 1}/${limitedTerms.length}`);
```

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ SerpAPI —Å–µ—Ä–≤—ñ—Å** - —á–∏ –º–∞—î –≤—ñ–Ω —Ç–∞–π–º–∞—É—Ç–∏
2. **–î–æ–¥–∞—Ç–∏ HTTP —Ç–∞–π–º–∞—É—Ç–∏** - –Ω–∞ —Ä—ñ–≤–Ω—ñ fetch/axios
3. **–î–æ–¥–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤** - –º–∞–∫—Å–∏–º—É–º 3 —Å–ø—Ä–æ–±–∏
4. **–î–æ–¥–∞—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è** - –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
5. **–î–æ–¥–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏

### 1. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à–∏–π API:**
- Google Places API
- OpenStreetMap API
- Foursquare API

### 2. **–°–ø—Ä–æ—Å—Ç–∏—Ç–∏ –ª–æ–≥—ñ–∫—É:**
- –¢—ñ–ª—å–∫–∏ –ø—Ä—è–º—ñ URL –∑ Place ID
- –ë–µ–∑ –ø–æ—à—É–∫—É –∑–∞ –Ω–∞–∑–≤–æ—é
- –ë–µ–∑ —Ä–æ–∑–∫—Ä–∏—Ç—Ç—è –∫–æ—Ä–æ—Ç–∫–∏—Ö URL

### 3. **–î–æ–¥–∞—Ç–∏ —Ä—É—á–Ω–∏–π –≤–≤—ñ–¥:**
- –ü–æ–ª–µ –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è Place ID
- –ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
- –¢—ñ–ª—å–∫–∏ –≤–∞–ª—ñ–¥–Ω—ñ Place ID

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ—Ç—Ä–µ–±—É—î –≥–ª–∏–±—à–æ–≥–æ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è SerpAPI —Å–µ—Ä–≤—ñ—Å—É —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∞–≥—Ä–µ—Å–∏–≤–Ω–∏—Ö —Ç–∞–π–º–∞—É—Ç—ñ–≤!** üîç
